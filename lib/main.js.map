{"version":3,"sources":["../src/main.js"],"names":["count1","Quaternion","require","canvas","gl","NumVerticesSphere","NumVerticesAsteroid","count","sphereIndex","points","colors","va","vec4","vb","vc","vd","shipSpeed","refSize","refSpeed","bulletSize","bulletSpeed","viewBoxLength","initialNumberOfAsteroids","pitch","yaw","roll","eye","pitchAxis","yawAxis","rollAxis","deltaAngle","proLoc","mvLoc","keyPressed","vertices","triangle","a","b","c","push","quad","d","cube","divideTriangle","ab","mix","ac","bc","normalize","tetrahedron","n","List","start","end","counter","makeNode","data","next","prev","id","prototype","add","remove","jo","changePos","position","direction","speed","Math","cos","radians","sin","forward","pos","dir","Asteroid","size","floor","random","Array","changePosition","wrapIfOutOfBounds","Bullet","posB","slice","valueOf","interf","bulletList","window","onload","init","document","querySelector","WebGLUtils","setupWebGL","alert","viewport","width","height","clearColor","enable","DEPTH_TEST","program","initShaders","useProgram","vBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","flatten","STATIC_DRAW","vPosition","getAttribLocation","vertexAttribPointer","FLOAT","enableVertexAttribArray","getUniformLocation","addEventListener","e","keyCode","render","asteroidList","i","setTimeout","requestAnimFrame","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","proj","perspective","uniformMatrix4fv","currentAsteroid","realSize","mv","mat4","mult","scalem","rotateY","translate","drawArrays","TRIANGLES","currentBullet"],"mappings":"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","file":"main.js","sourcesContent":["/*\n\n  Asteroids in 3D\n*/\nvar count1 = 1;\nconst Quaternion = require('quaternion');\n\nlet canvas;\nlet gl;\n\nlet NumVerticesSphere = 0;\nlet NumVerticesAsteroid = 36;\n\nlet count = 5;\n\nconst sphereIndex = 0;\n\nconst points = [];\nconst colors = [];\n\nconst va = vec4(0.0, 0.0, -1.0,1);\nconst vb = vec4(0.0, 0.942809, 0.333333, 1);\nconst vc = vec4(-0.816497, -0.471405, 0.333333, 1);\nconst vd = vec4(0.816497, -0.471405, 0.333333,1);\n\nconst shipSpeed = 0.04;\n\nconst refSize = 0.2;\nconst refSpeed = 0.01;\n\nconst bulletSize = 0.005;\nconst bulletSpeed = 0.03;\n\nconst viewBoxLength = 20.0;\n\nconst initialNumberOfAsteroids = 20;\n\nlet pitch = 0.0;\nlet yaw = 0.0;\nlet roll = 0.0;\nlet eye = [0.0, 0.0, 0.0];\nlet pitchAxis = [1.0, 0.0, 0.0];\nlet yawAxis = [0.0, 1.0, 0.0];\nlet rollAxis = [0.0, 0.0, -1.0];\nconst deltaAngle = 1;\n\n\nlet proLoc;\nlet mvLoc;\n\nconst keyPressed = {};\n\nconst vertices = [\n  vec4( -0.5, -0.5,  0.5, 1.0 ),\n  vec4( -0.5,  0.5,  0.5, 1.0 ),\n  vec4(  0.5,  0.5,  0.5, 1.0 ),\n  vec4(  0.5, -0.5,  0.5, 1.0 ),\n  vec4( -0.5, -0.5, -0.5, 1.0 ),\n  vec4( -0.5,  0.5, -0.5, 1.0 ),\n  vec4(  0.5,  0.5, -0.5, 1.0 ),\n  vec4(  0.5, -0.5, -0.5, 1.0 )\n];\n\nfunction triangle(a, b, c) {\n\n  points.push(a);\n  points.push(b);\n  points.push(c);\n\n  NumVerticesSphere+= 3;\n}\n\nfunction quad(a, b, c, d) {\n  points.push(vertices[a]);\n  points.push(vertices[b]);\n  points.push(vertices[c]);\n  points.push(vertices[a]);\n  points.push(vertices[c]);\n  points.push(vertices[d]);\n}\n\n\nfunction cube() {\n  quad( 1, 0, 3, 2 );\n  quad( 2, 3, 7, 6 );\n  quad( 3, 0, 4, 7 );\n  quad( 6, 5, 1, 2 );\n  quad( 4, 5, 6, 7 );\n  quad( 5, 4, 0, 1 );\n}\n\nfunction divideTriangle(a, b, c, count) {\n  if ( count > 0 ) {\n\n    var ab = mix( a, b, 0.5);\n    var ac = mix( a, c, 0.5);\n    var bc = mix( b, c, 0.5);\n\n    ab = normalize(ab, true);\n    ac = normalize(ac, true);\n    bc = normalize(bc, true);\n\n    divideTriangle( a, ab, ac, count - 1 );\n    divideTriangle( ab, b, bc, count - 1 );\n    divideTriangle( bc, c, ac, count - 1 );\n    divideTriangle( ab, bc, ac, count - 1 );\n  }\n  else {\n    triangle( a, b, c );\n  }\n}\n\n\nfunction tetrahedron(a, b, c, d, n) {\n    divideTriangle(a, b, c, n);\n    divideTriangle(d, c, b, n);\n    divideTriangle(a, d, b, n);\n    divideTriangle(a, c, d, n);\n}\n\nfunction List() {\n  this.start = null;\n  this.end = null;\n  this.counter = 0;\n}\n\nList.makeNode = function () {\n  return { data: null, next: null, prev: null, id: null};\n};\n\nList.prototype.add = function(data) {\n  if (this.start===null){\n    this.start=List.makeNode();\n    this.end=this.start;\n  } else {\n    this.end.next = List.makeNode();\n    this.end.next.prev = this.end;\n    this.end = this.end.next;\n  }\n  this.end.data = data;\n}\n\nList.prototype.remove = function(id) {\n  let jo = this.start;\n\n  while (jo != null) {\n    if (jo.id === id) {\n      jo.prev.next = jo.next;\n    } else {\n      jo = jo.next;\n    }\n  }\n}\n\nfunction changePos(position, direction, speed) {\n  position[0] += speed*Math.cos(radians(direction[0]))*Math.cos(radians(direction[1]));\n  position[1] += speed*Math.sin(radians(direction[0]))*Math.cos(radians(direction[1]));\n  position[2] += speed*Math.cos(radians(direction[0]))*Math.sin(radians(direction[1]));\n  return position;\n}\n\n\nfunction forward(pos, dir, speed) {\n  pos[0] -= speed*Math.sin(radians(dir));\n  pos[2] -= speed*Math.cos(radians(dir));\n  return pos;\n}\n\n//Asteroid \"Class\" description:\n// Three types of sizes for asteroids.\n// If value is zero then it is not drawn\n// Vector of length maxNumber.\n// Possible values : {0, 1, 2, 3}\n\n\n// Two angles theta and phi for 3D direction\n// Matrix of size maxNumber x 2\n// -180 < theta < 180\n// -90< phi < 90\nfunction Asteroid() {\n\n  this.size = Math.floor(Math.random()*3.0) + 1.0;\n\n  let pos = new Array(3);\n  pos[0] = Math.random()*(viewBoxLength-this.size) - (viewBoxLength-this.size)/2.0;\n  pos[1] = Math.random()*(viewBoxLength-this.size) - (viewBoxLength-this.size)/2.0;\n  pos[2] = Math.random()*(viewBoxLength-this.size) - (viewBoxLength-this.size)/2.0;\n  this.position = pos;\n\n  let dir = new Array(2);\n  dir[0] = Math.random()*360 - 180;\n  dir[1] = Math.random()*180 - 90;\n  this.direction = dir;\n\n  this.speed = (4-this.size)*refSpeed;\n}\nAsteroid.prototype.changePosition = function() {\n  this.position = changePos(this.position, this.direction, this.speed);\n};\n\nAsteroid.prototype.wrapIfOutOfBounds = function() {\n  let pos = this.position;\n  if(pos[0] < -viewBoxLength){\n      pos[0] = viewBoxLength;\n  }\n  if(pos[0] > viewBoxLength){\n      pos[0] = -viewBoxLength;\n  }\n  if(pos[1] < -viewBoxLength){\n      pos[1] = viewBoxLength;\n  }\n  if(pos[1] > viewBoxLength){\n      pos[1] = -viewBoxLength;\n  }\n  if(pos[2] < -viewBoxLength){\n      pos[2] = viewBoxLength;\n  }\n  if(pos[2] > viewBoxLength){\n      pos[2] = -viewBoxLength;\n  }\n\n  this.position = pos;\n};\n\nfunction Bullet() {\n  let posB = eye.slice();\n  posB[1] -= 2\n  this.position = posB;\n\n  this.direction = yaw.valueOf();\n}\n\nBullet.prototype.changePosition = function() {\n  this.position = forward(this.position, this.direction, bulletSpeed);\n};\n\nBullet.prototype.wrapIfOutOfBounds = function() {\n  let pos = this.position;\n  if(pos[0] < -viewBoxLength){\n      pos[0] = viewBoxLength;\n  }\n  if(pos[0] > viewBoxLength){\n      pos[0] = -viewBoxLength;\n  }\n  if(pos[1] < -viewBoxLength){\n      pos[1] = viewBoxLength;\n  }\n  if(pos[1] > viewBoxLength){\n      pos[1] = -viewBoxLength;\n  }\n  if(pos[2] < -viewBoxLength){\n      pos[2] = viewBoxLength;\n  }\n  if(pos[2] > viewBoxLength){\n      pos[2] = -viewBoxLength;\n  }\n\n  this.position = pos;\n};\n\n\n\nfunction interf() {\n  if (keyPressed[\"38\"]) eye[1] += shipSpeed; // upp ör\n  if (keyPressed[\"40\"]) eye[1] -= shipSpeed; // niður ör\n  if (keyPressed[\"37\"]) yaw += deltaAngle; // vinstri ör\n  if (keyPressed[\"39\"]) yaw -= deltaAngle; // hægri ör\n  if (keyPressed[\"88\"]) bulletList.add(new Bullet()); // x\n  if (keyPressed[\"90\"]) eye = forward(eye, yaw, shipSpeed); // z\n}\n\n\n\nwindow.onload = function init()\n{\n  canvas = document.querySelector( \"canvas\" );\n\n  gl = WebGLUtils.setupWebGL( canvas );\n  if ( !gl ) { alert( \"WebGL isn't available\" ); }\n\n  // insert vertices into array: points\n  cube();\n  tetrahedron(va, vb, vc, vd, count);\n\n  gl.viewport( 0, 0, canvas.width, canvas.height );\n  gl.clearColor( 0.0, 0.0, 0.0, 1.0 );\n\n  gl.enable(gl.DEPTH_TEST);\n\n  //\n  //  Load shaders and initialize attribute buffers\n  //\n  let program = initShaders( gl, \"vertex-shader\", \"fragment-shader\" );\n  gl.useProgram( program );\n\n  let vBuffer = gl.createBuffer();\n  gl.bindBuffer( gl.ARRAY_BUFFER, vBuffer );\n  gl.bufferData( gl.ARRAY_BUFFER, flatten(points), gl.STATIC_DRAW );\n\n  let vPosition = gl.getAttribLocation( program, \"vPosition\" );\n  gl.vertexAttribPointer( vPosition, 4, gl.FLOAT, false, 0, 0 );\n  gl.enableVertexAttribArray( vPosition );\n\n  proLoc = gl.getUniformLocation( program, \"projectionMatrix\" );\n  mvLoc = gl.getUniformLocation( program, \"modelViewMatrix\" );\n\n  // Event listener for keyboard\n  window.addEventListener('keydown', function(e) {\n    keyPressed[e.keyCode] = true;\n  }, false);\n  document.addEventListener('keyup', function(e) {\n   keyPressed[e.keyCode] = false;\n  }, false);\n\n\n  render();\n}\n\n\n// Initialize asteroids\nlet asteroidList = new List();\nfor(let i=1; i <= initialNumberOfAsteroids; i++){\n  asteroidList.add(new Asteroid(3));\n}\n\nlet bulletList = new List();\n\n//  Render the view\nfunction render()\n{\n  setTimeout(function() {\n      window.requestAnimFrame( render );\n      gl.clear( gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n      interf();\n\n      //  proj = perspective(fovy, aspect, near, far)\n      let proj = perspective( 75.0, 1.0, 0.01, 100.0 );\n      gl.uniformMatrix4fv(proLoc, false, flatten(proj));\n\n\n      let currentAsteroid = asteroidList.start;\n      while (currentAsteroid !== null) {\n\n        let position = currentAsteroid.data.position;\n        let realSize = refSize*currentAsteroid.data.size;\n        let mv = mat4();\n        mv = mult(mv, scalem(realSize, realSize, realSize));\n        mv = mult(mv, rotateY(yaw));\n        mv = mult(mv, translate(-eye[0], -eye[1], -eye[2]));\n        mv = mult(mv, translate(position[0], position[1], position[2]));\n\n\n        gl.uniformMatrix4fv(mvLoc, false, flatten(mv));\n        gl.drawArrays( gl.TRIANGLES, 0, NumVerticesAsteroid );\n\n        currentAsteroid.data.changePosition();\n        currentAsteroid.data.wrapIfOutOfBounds();\n\n        currentAsteroid = currentAsteroid.next;\n      }\n\n      let currentBullet = bulletList.start;\n      while (currentBullet !== null) {\n\n        let position = currentBullet.data.position;\n\n\n        let mv = mat4();\n        mv = mult( mv, scalem(bulletSize, bulletSize, bulletSize));\n        mv = mult(mv, rotateY(yaw));\n        mv = mult(mv, translate(-eye[0], -eye[1], -eye[2]));\n        mv = mult( mv, translate(position[0], position[1], position[2]));\n\n        gl.uniformMatrix4fv(mvLoc, false, flatten(mv));\n        gl.drawArrays( gl.TRIANGLES, NumVerticesAsteroid, NumVerticesSphere );\n\n        currentBullet.data.changePosition();\n        currentBullet.data.wrapIfOutOfBounds();\n\n        currentBullet = currentBullet.next;\n      }\n\n  }, 25)\n}\n"]}